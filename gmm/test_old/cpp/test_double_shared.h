#ifndef TEST_DOUBLE_SHARED_H
#define TEST_DOUBLE_SHARED_H

#include "mc3d_common.h"
#include "gmm.h"
#include "bspline.h"
#include "bspline.h"
#include "spdlog/sinks/basic_file_sink.h"
#include "gmm_param.h"
#include <gtest/gtest.h>
#include <Eigen/Dense>
#include <iomanip>
#include <memory>

using namespace MC3D_TRECSIM;

std::vector<std::string> allDoubleFrameCameraIds = {
    "camera_0",
    "camera_1",
    "camera_0",
    "camera_1",
    "camera_0",
    "camera_1",
    "camera_0",
    "camera_1",
    "camera_0",
    "camera_1"};

std::vector<double> allDoubleFrameOrigTimestamps = {
    1701415521133.655,
    1701415521134.211,
    1701415521156.039,
    1701415521156.4326,
    1701415521178.5227,
    1701415521178.842,
    1701415521200.3083,
    1701415521200.9583,
    1701415521222.0793,
    1701415521222.5564};

std::vector<double> allDoubleFrameTimes = {
    -17.6669921875,
    0.0,
    17.781005859375,
    33.06640625,
    48.531005859375,
    65.62841796875,
    81.696044921875,
    98.84228515625,
    115.468505859375,
    132.369384765625};

RowMatrix<double> kptsDoubleFrame0Person0 = (RowMatrix<double>(17, 3) << 1.35087701e+03, 4.41063930e+02, 2.92053223e-02,
                                        1.35023740e+03, 4.25327473e+02, 2.21557617e-02,
                                        1.35875499e+03, 4.30474069e+02, 5.21850586e-03,
                                        1.31142001e+03, 4.48538821e+02, 8.63769531e-01,
                                        1.43080708e+03, 4.57103129e+02, 5.40039062e-01,
                                        1.25302631e+03, 5.22266416e+02, 9.80468750e-01,
                                        1.43930354e+03, 5.32027775e+02, 9.79003906e-01,
                                        1.13745317e+03, 4.42394236e+02, 9.50683594e-01,
                                        1.54266644e+03, 4.10061343e+02, 9.50195312e-01,
                                        1.08360604e+03, 3.00449753e+02, 8.89160156e-01,
                                        1.57749833e+03, 2.88212813e+02, 8.89160156e-01,
                                        1.23089238e+03, 7.48768936e+02, 9.91210938e-01,
                                        1.34044071e+03, 7.69779210e+02, 9.91210938e-01,
                                        1.21169320e+03, 8.29092457e+02, 9.76562500e-01,
                                        1.30557992e+03, 9.09129119e+02, 9.75585938e-01,
                                        1.19916657e+03, 8.88444700e+02, 9.38476562e-01,
                                        1.29350658e+03, 1.08963017e+03, 9.35546875e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame1Person0 = (RowMatrix<double>(17, 3) << 4.28175369e+02, 5.20292804e+01, 3.03344727e-02,
                                        4.18895601e+02, 3.81861013e+01, 2.52685547e-02,
                                        4.28052154e+02, 4.18267849e+01, 2.16217041e-02,
                                        3.87305688e+02, 4.29811940e+01, 4.98779297e-01,
                                        4.46905401e+02, 4.47277216e+01, 5.93261719e-01,
                                        3.86404370e+02, 1.23742543e+02, 9.58984375e-01,
                                        4.96750948e+02, 1.20841654e+02, 9.60937500e-01,
                                        3.88100634e+02, 2.16010219e+02, 8.77441406e-01,
                                        5.39114137e+02, 2.07524464e+02, 8.81835938e-01,
                                        3.98916290e+02, 2.94346312e+02, 7.92968750e-01,
                                        5.60731381e+02, 2.71474644e+02, 7.93945312e-01,
                                        4.54134037e+02, 2.81643776e+02, 9.63867188e-01,
                                        5.19595454e+02, 2.79464779e+02, 9.64843750e-01,
                                        4.86566090e+02, 3.90553467e+02, 9.33105469e-01,
                                        5.42736221e+02, 3.83941735e+02, 9.34570312e-01,
                                        5.15690916e+02, 4.84426093e+02, 9.03320312e-01,
                                        5.64766310e+02, 4.78531535e+02, 9.05273438e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame2Person0 = (RowMatrix<double>(17, 3) << 1.33716874e+03, 4.12031382e+02, 3.39050293e-02,
                                        1.33392553e+03, 4.01511589e+02, 3.41796875e-02,
                                        1.34744080e+03, 4.03552040e+02, 6.48880005e-03,
                                        1.30891234e+03, 4.16225822e+02, 7.18750000e-01,
                                        1.40234181e+03, 4.21263215e+02, 4.84375000e-01,
                                        1.24311879e+03, 4.85902295e+02, 9.68750000e-01,
                                        1.43355920e+03, 4.92933142e+02, 9.72656250e-01,
                                        1.11564183e+03, 4.21195496e+02, 9.51660156e-01,
                                        1.53686793e+03, 3.88800140e+02, 9.49218750e-01,
                                        1.05360040e+03, 3.01034540e+02, 9.07226562e-01,
                                        1.55881537e+03, 2.67557888e+02, 8.90136719e-01,
                                        1.22744754e+03, 7.03963093e+02, 9.85351562e-01,
                                        1.33614040e+03, 7.25390465e+02, 9.86816406e-01,
                                        1.20382022e+03, 7.67718164e+02, 9.66796875e-01,
                                        1.28947322e+03, 8.47935751e+02, 9.67285156e-01,
                                        1.19405049e+03, 8.19781639e+02, 9.33105469e-01,
                                        1.28245972e+03, 1.02413710e+03, 9.31640625e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame3Person0 = (RowMatrix<double>(17, 3) << 4.22271955e+02, 5.07561081e+01, 2.82745361e-02,
                                        4.13664050e+02, 3.69818929e+01, 2.63519287e-02,
                                        4.23571240e+02, 4.05751644e+01, 1.82952881e-02,
                                        3.86486960e+02, 4.24792166e+01, 5.39550781e-01,
                                        4.46796377e+02, 4.39844713e+01, 5.81542969e-01,
                                        3.87094395e+02, 1.23493173e+02, 9.59472656e-01,
                                        4.96730583e+02, 1.20669250e+02, 9.60449219e-01,
                                        3.88786570e+02, 2.15760721e+02, 8.78906250e-01,
                                        5.39085266e+02, 2.07204013e+02, 8.80371094e-01,
                                        3.99626031e+02, 2.94408182e+02, 7.94921875e-01,
                                        5.60037456e+02, 2.70510902e+02, 7.92480469e-01,
                                        4.53991158e+02, 2.80079988e+02, 9.64355469e-01,
                                        5.19449554e+02, 2.77616550e+02, 9.64843750e-01,
                                        4.86825062e+02, 3.89390534e+02, 9.34082031e-01,
                                        5.42706928e+02, 3.83358609e+02, 9.35058594e-01,
                                        5.15352028e+02, 4.83562811e+02, 9.04785156e-01,
                                        5.64801890e+02, 4.79942302e+02, 9.06250000e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame4Person0 = (RowMatrix<double>(17, 3) << 1.30763675e+03, 3.88186520e+02, 2.53753662e-02,
                                        1.30678342e+03, 3.80149133e+02, 2.51770020e-02,
                                        1.32257573e+03, 3.81197619e+02, 6.64138794e-03,
                                        1.29393785e+03, 3.98202526e+02, 7.69531250e-01,
                                        1.38522920e+03, 4.03369361e+02, 4.48486328e-01,
                                        1.23410425e+03, 4.73310605e+02, 9.69726562e-01,
                                        1.40665027e+03, 4.76054983e+02, 9.69238281e-01,
                                        1.11125806e+03, 4.19050069e+02, 9.53125000e-01,
                                        1.52110972e+03, 3.87316279e+02, 9.42382812e-01,
                                        1.03243652e+03, 3.13472451e+02, 9.04785156e-01,
                                        1.54488197e+03, 2.85555136e+02, 8.84277344e-01,
                                        1.21542879e+03, 6.73874143e+02, 9.85839844e-01,
                                        1.31315180e+03, 6.91313149e+02, 9.85839844e-01,
                                        1.19950144e+03, 7.33965843e+02, 9.70214844e-01,
                                        1.28564833e+03, 7.96312486e+02, 9.69726562e-01,
                                        1.18993297e+03, 7.99609245e+02, 9.46777344e-01,
                                        1.27614092e+03, 9.43507717e+02, 9.45312500e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame5Person0 = (RowMatrix<double>(17, 3) << 4.22581496e+02, 5.04411200e+01, 2.83813477e-02,
                                        4.13604487e+02, 3.66048834e+01, 2.64587402e-02,
                                        4.23542305e+02, 4.03877028e+01, 1.81884766e-02,
                                        3.86803030e+02, 4.21637933e+01, 5.40039062e-01,
                                        4.47101579e+02, 4.36672344e+01, 5.80566406e-01,
                                        3.87282724e+02, 1.22307019e+02, 9.59472656e-01,
                                        4.96968041e+02, 1.19847673e+02, 9.60449219e-01,
                                        3.89370041e+02, 2.14683134e+02, 8.79882812e-01,
                                        5.39027438e+02, 2.06562897e+02, 8.80859375e-01,
                                        3.99240260e+02, 2.94061992e+02, 7.95898438e-01,
                                        5.59970674e+02, 2.69590909e+02, 7.92968750e-01,
                                        4.54244376e+02, 2.79169777e+02, 9.64355469e-01,
                                        5.19400699e+02, 2.77000033e+02, 9.65332031e-01,
                                        4.86791851e+02, 3.88800630e+02, 9.34570312e-01,
                                        5.42692248e+02, 3.83066996e+02, 9.35546875e-01,
                                        5.15352028e+02, 4.83562811e+02, 9.05273438e-01,
                                        5.65410771e+02, 4.79956422e+02, 9.06738281e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame6Person0 = (RowMatrix<double>(17, 3) << 1.29861436e+03, 3.73567813e+02, 3.46984863e-02,
                                        1.29780968e+03, 3.64920129e+02, 3.23486328e-02,
                                        1.31105225e+03, 3.66929405e+02, 9.33837891e-03,
                                        1.28500706e+03, 3.82205958e+02, 7.94433594e-01,
                                        1.36941959e+03, 3.89521161e+02, 4.64599609e-01,
                                        1.22180245e+03, 4.55785977e+02, 9.70214844e-01,
                                        1.38782998e+03, 4.63096357e+02, 9.70214844e-01,
                                        1.09259700e+03, 4.14898524e+02, 9.47265625e-01,
                                        1.50056979e+03, 3.97267060e+02, 9.35546875e-01,
                                        1.02295349e+03, 3.25626008e+02, 8.92578125e-01,
                                        1.51734816e+03, 3.28096428e+02, 8.70117188e-01,
                                        1.21047467e+03, 6.43580400e+02, 9.84863281e-01,
                                        1.30278685e+03, 6.56348493e+02, 9.84863281e-01,
                                        1.19350479e+03, 7.19930555e+02, 9.69238281e-01,
                                        1.27784587e+03, 7.50772211e+02, 9.67773438e-01,
                                        1.19573409e+03, 8.02077182e+02, 9.46289062e-01,
                                        1.27413178e+03, 8.75039261e+02, 9.44335938e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame7Person0 = (RowMatrix<double>(17, 3) << 4.20776941e+02, 5.03424673e+01, 2.83813477e-02,
                                        4.12122031e+02, 3.63661378e+01, 2.72216797e-02,
                                        4.22073443e+02, 4.01557922e+01, 1.77154541e-02,
                                        3.86803030e+02, 4.21637933e+01, 5.46875000e-01,
                                        4.47101579e+02, 4.36672344e+01, 5.75683594e-01,
                                        3.87998436e+02, 1.22234475e+02, 9.58984375e-01,
                                        4.96947638e+02, 1.19675142e+02, 9.60449219e-01,
                                        3.90075716e+02, 2.14599201e+02, 8.79882812e-01,
                                        5.39041906e+02, 2.06723203e+02, 8.79882812e-01,
                                        3.99564134e+02, 2.93777664e+02, 7.95898438e-01,
                                        5.60059667e+02, 2.70817456e+02, 7.91992188e-01,
                                        4.54922775e+02, 2.79227180e+02, 9.64355469e-01,
                                        5.19400699e+02, 2.77000033e+02, 9.64843750e-01,
                                        4.87116939e+02, 3.88817252e+02, 9.34570312e-01,
                                        5.43330912e+02, 3.83387913e+02, 9.35546875e-01,
                                        5.15667351e+02, 4.83570703e+02, 9.05761719e-01,
                                        5.66019405e+02, 4.79970513e+02, 9.07226562e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame8Person0 = (RowMatrix<double>(17, 3) << 1.29162146e+03, 3.68378528e+02, 4.66308594e-02,
                                        1.28990918e+03, 3.53666513e+02, 4.63867188e-02,
                                        1.30181473e+03, 3.57183984e+02, 6.31332397e-03,
                                        1.26896824e+03, 3.67031844e+02, 8.65722656e-01,
                                        1.35665660e+03, 3.69100636e+02, 4.63378906e-01,
                                        1.21754321e+03, 4.41128875e+02, 9.79003906e-01,
                                        1.37738581e+03, 4.36417991e+02, 9.78027344e-01,
                                        1.08920378e+03, 4.22131593e+02, 9.44335938e-01,
                                        1.48595775e+03, 3.86063853e+02, 9.30175781e-01,
                                        1.01731533e+03, 3.42484664e+02, 8.74511719e-01,
                                        1.44903909e+03, 3.47377009e+02, 8.45703125e-01,
                                        1.21485105e+03, 6.22247730e+02, 9.86816406e-01,
                                        1.30476081e+03, 6.24589894e+02, 9.86816406e-01,
                                        1.18972282e+03, 7.00485511e+02, 9.67773438e-01,
                                        1.27159504e+03, 6.99335074e+02, 9.63867188e-01,
                                        1.20838700e+03, 8.02502266e+02, 9.30175781e-01,
                                        1.27061286e+03, 8.07229947e+02, 9.22851562e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame9Person0 = (RowMatrix<double>(17, 3) << 4.16032302e+02, 5.21449610e+01, 4.27246094e-02,
                                        4.13442482e+02, 3.78644385e+01, 3.20434570e-02,
                                        4.14552856e+02, 3.80425366e+01, 3.02124023e-02,
                                        3.88191074e+02, 4.16572014e+01, 5.75683594e-01,
                                        4.48153080e+02, 4.36447969e+01, 5.60058594e-01,
                                        3.86195276e+02, 1.22327110e+02, 9.76074219e-01,
                                        4.96526412e+02, 1.18943870e+02, 9.76074219e-01,
                                        3.90099070e+02, 2.17702369e+02, 9.00878906e-01,
                                        5.37649287e+02, 2.05484341e+02, 9.08691406e-01,
                                        4.01167043e+02, 2.95791366e+02, 7.57812500e-01,
                                        5.61402550e+02, 2.72131324e+02, 7.72949219e-01,
                                        4.54992317e+02, 2.72700883e+02, 9.82421875e-01,
                                        5.18855909e+02, 2.70203617e+02, 9.82910156e-01,
                                        4.87549023e+02, 3.85013838e+02, 9.61914062e-01,
                                        5.43837014e+02, 3.81084043e+02, 9.63378906e-01,
                                        5.18501916e+02, 4.83641389e+02, 9.33105469e-01,
                                        5.66081990e+02, 4.82508177e+02, 9.34570312e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame0Person1 = (RowMatrix<double>(17, 3) << 6.98742229e+02, -5.62676058e+01, 5.60058594e-01,
                                        7.04855551e+02, -6.65281697e+01,  5.28808594e-01,
                                        6.93841820e+02, -6.81077211e+01,  3.05908203e-01,
                                        7.20909695e+02, -6.46866293e+01,  5.38574219e-01,
                                        6.92134482e+02, -5.87267566e+01,  3.19335938e-01,
                                        7.60218033e+02, -4.94797242e+00,  9.39453125e-01,
                                        6.93711414e+02, -1.24392423e+01,  9.26269531e-01,
                                        7.86817056e+02,  6.73146897e+01,  8.79394531e-01,
                                        6.93039046e+02,  5.40606889e+01,  8.10058594e-01,
                                        8.00919398e+02,  1.27959474e+02,  8.32519531e-01,
                                        6.91585012e+02,  1.14495033e+02,  7.66601562e-01,
                                        7.60902780e+02,  1.05922740e+02,  9.56542969e-01,
                                        7.21751404e+02,  1.03092584e+02,  9.52636719e-01,
                                        7.74172527e+02,  2.07700596e+02,  9.28222656e-01,
                                        7.40417222e+02,  2.07422597e+02,  9.22851562e-01,
                                        7.95728117e+02,  2.97496647e+02,  8.86230469e-01,
                                        7.74846041e+02,  2.83005223e+02,  8.80859375e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame1Person1 = (RowMatrix<double>(17, 3) << 2.56538001e+03, -1.38054258e+01, 7.19604492e-02,
                                        2.63622995e+03, -5.12173543e+01,  2.43835449e-02,
                                        2.60445327e+03, -3.98403524e+01,  5.64575195e-02,
                                        2.36411387e+03,  1.88743459e+01,  9.15527344e-02,
                                        2.59307805e+03, -1.67575504e+01,  2.03857422e-01,
                                        2.20021190e+03,  1.06678876e+02,  8.59863281e-01,
                                        2.35542771e+03,  1.29285945e+02,  7.91992188e-01,
                                        2.24462831e+03, -3.62827181e+01,  6.21093750e-01,
                                        2.51009911e+03,  3.28626073e+00,  4.42138672e-01,
                                        2.35522423e+03, -1.06970336e+02,  3.42529297e-01,
                                        2.54605191e+03, -5.68016717e+01,  2.15332031e-01,
                                        1.96127176e+03,  3.81494918e+02,  9.49707031e-01,
                                        2.04351200e+03,  3.95538451e+02,  9.34082031e-01,
                                        1.80332920e+03,  5.03526654e+02,  9.34570312e-01,
                                        1.86910596e+03,  5.23754502e+02,  9.12109375e-01,
                                        1.81572918e+03,  6.25844969e+02,  9.32128906e-01,
                                        1.89238181e+03,  6.44748399e+02,  9.16015625e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame2Person1 = (RowMatrix<double>(17, 3) << 6.98768244e+02, -5.59740625e+01, 5.46386719e-01,
                                        7.04890035e+02, -6.61331502e+01,  5.15136719e-01,
                                        6.93212197e+02, -6.79809183e+01,  2.95166016e-01,
                                        7.20302808e+02, -6.43566066e+01,  5.30273438e-01,
                                        6.92170213e+02, -5.83341221e+01,  3.21289062e-01,
                                        7.60224036e+02, -4.85547421e+00,  9.39453125e-01,
                                        6.93752154e+02, -1.19698597e+01,  9.26269531e-01,
                                        7.86817056e+02,  6.73146897e+01,  8.79394531e-01,
                                        6.93074713e+02,  5.45024627e+01,  8.10546875e-01,
                                        8.00926499e+02,  1.28123339e+02,  8.32519531e-01,
                                        6.91597517e+02,  1.14662968e+02,  7.67578125e-01,
                                        7.60893371e+02,  1.05755148e+02,  9.56542969e-01,
                                        7.21740032e+02,  1.02923775e+02,  9.52636719e-01,
                                        7.74172527e+02,  2.07700596e+02,  9.28222656e-01,
                                        7.39838047e+02,  2.07546730e+02,  9.22851562e-01,
                                        7.95172048e+02,  2.97771617e+02,  8.86230469e-01,
                                        7.75416304e+02,  2.83025801e+02,  8.80859375e-01)
                                          .finished();

// Does not exist
// RowMatrix<double> kptsDoubleFrame3Person1 = (RowMatrix<double>(17, 3) ).finished();

RowMatrix<double> kptsDoubleFrame4Person1 = (RowMatrix<double>(17, 3) << 6.98167970e+02, -5.55534349e+01, 5.92773438e-01,
                                        7.04280579e+02, -6.58063161e+01, 5.62988281e-01,
                                        6.92618700e+02, -6.74581535e+01, 3.32275391e-01,
                                        7.20974030e+02, -6.38996440e+01, 5.55175781e-01,
                                        6.91541912e+02, -5.82083823e+01, 3.31787109e-01,
                                        7.59624824e+02, -4.62543744e+00, 9.42382812e-01,
                                        6.93181046e+02, -1.12835189e+01, 9.29199219e-01,
                                        7.86808118e+02,  6.71419532e+01, 8.80371094e-01,
                                        6.93145929e+02,  5.53854879e+01, 8.11035156e-01,
                                        8.00312249e+02,  1.27439639e+02, 8.33496094e-01,
                                        6.91634997e+02,  1.15166632e+02, 7.68066406e-01,
                                        7.60883958e+02,  1.05587533e+02, 9.56054688e-01,
                                        7.21751404e+02,  1.03092584e+02, 9.52636719e-01,
                                        7.74172527e+02,  2.07700596e+02, 9.28222656e-01,
                                        7.40425164e+02,  2.07578101e+02, 9.22363281e-01,
                                        7.95736896e+02,  2.97788956e+02, 8.86230469e-01,
                                        7.75416304e+02,  2.83025801e+02, 8.80371094e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame5Person1 = (RowMatrix<double>(17, 3) << 2.03368304e+03, 6.80818880e+01, 4.41894531e-01,
                                        2.05462548e+03, 5.77410610e+01, 3.02490234e-01,
                                        2.04909471e+03, 5.12175191e+01, 8.56933594e-02,
                                        2.06274519e+03, 7.24301188e+01, 5.78613281e-01,
                                        2.09387890e+03, 6.63457257e+01, 2.18139648e-01,
                                        2.01918217e+03, 1.44346728e+02, 9.37011719e-01,
                                        1.98947587e+03, 1.57533846e+02, 9.40917969e-01,
                                        1.93592089e+03, 9.92531800e+01, 8.48144531e-01,
                                        1.87153733e+03, 1.08388690e+02, 8.36425781e-01,
                                        1.88261218e+03, 4.02143773e+01, 7.63671875e-01,
                                        1.84968912e+03, 4.78338335e+01, 7.31445312e-01,
                                        1.77263710e+03, 3.79489209e+02, 9.64355469e-01,
                                        1.77267339e+03, 3.79153146e+02, 9.64843750e-01,
                                        1.64101924e+03, 4.89246401e+02, 9.48242188e-01,
                                        1.71766520e+03, 5.00637609e+02, 9.44824219e-01,
                                        1.51396611e+03, 5.76066778e+02, 9.34570312e-01,
                                        1.80153124e+03, 5.93491055e+02, 9.32617188e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame6Person1 = (RowMatrix<double>(17, 3) << 6.98185331e+02, -5.53578520e+01, 5.71777344e-01,
                                        7.04315097e+02, -6.54115487e+01,  5.44921875e-01,
                                        6.93266447e+02, -6.73867597e+01,  3.12988281e-01,
                                        7.20974030e+02, -6.38996440e+01,  5.42968750e-01,
                                        6.91541912e+02, -5.82083823e+01,  3.26904297e-01,
                                        7.59630841e+02, -4.53296171e+00,  9.40917969e-01,
                                        6.93768438e+02, -1.17821655e+01,  9.27734375e-01,
                                        7.86218669e+02,  6.72793717e+01,  8.78906250e-01,
                                        6.93067583e+02,  5.44141219e+01,  8.08593750e-01,
                                        8.00333650e+02,  1.27931400e+02,  8.32031250e-01,
                                        6.91547464e+02,  1.13991090e+02,  7.65625000e-01,
                                        7.60248744e+02,  1.04879567e+02,  9.56054688e-01,
                                        7.21075423e+02,  1.02034333e+02,  9.52148438e-01,
                                        7.74165827e+02,  2.07545749e+02,  9.27734375e-01,
                                        7.39814142e+02,  2.07080123e+02,  9.22363281e-01,
                                        7.95736896e+02,  2.97788956e+02,  8.86230469e-01,
                                        7.74835587e+02,  2.82709851e+02,  8.80371094e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame7Person1 = (RowMatrix<double>(17, 3) << 1.92162767e+03, 9.50385848e+01, 3.53515625e-01,
                                        1.93501744e+03, 8.58490583e+01, 2.79785156e-01,
                                        1.93412927e+03, 8.08805379e+01, 6.67114258e-02,
                                        1.94403124e+03, 1.02272551e+02, 6.98730469e-01,
                                        2.01063202e+03, 9.61836628e+01, 2.29248047e-01,
                                        1.91091595e+03, 1.75756818e+02, 9.44824219e-01,
                                        1.93861092e+03, 1.89202110e+02, 9.26269531e-01,
                                        1.80136775e+03, 1.81675278e+02, 8.45214844e-01,
                                        1.78988286e+03, 2.11340379e+02, 7.08007812e-01,
                                        1.74993344e+03, 8.50298498e+01, 6.98242188e-01,
                                        1.73924997e+03, 1.17609889e+02, 5.28808594e-01,
                                        1.71292845e+03, 3.72843805e+02, 9.59960938e-01,
                                        1.73995383e+03, 3.72720429e+02, 9.51660156e-01,
                                        1.57029860e+03, 4.71161862e+02, 9.38476562e-01,
                                        1.63815734e+03, 4.80011946e+02, 9.18457031e-01,
                                        1.50103610e+03, 5.66074036e+02, 9.22851562e-01,
                                        1.71787375e+03, 5.54450514e+02, 9.07226562e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame8Person1 = (RowMatrix<double>(17, 3) << 6.97558973e+02, -5.52308516e+01, 5.48339844e-01,
                                        7.03705657e+02, -6.50850348e+01,  5.18066406e-01,
                                        6.92654922e+02, -6.70621824e+01,  2.87841797e-01,
                                        7.20367270e+02, -6.35698219e+01,  5.37597656e-01,
                                        6.92152351e+02, -5.85304203e+01,  3.19335938e-01,
                                        7.59624824e+02, -4.62543744e+00,  9.39941406e-01,
                                        6.93050411e+02, -1.27854259e+01,  9.26269531e-01,
                                        7.86808118e+02,  6.71419532e+01,  8.79394531e-01,
                                        6.92996195e+02,  5.35303300e+01,  8.07128906e-01,
                                        8.00276516e+02,  1.26619602e+02,  8.32031250e-01,
                                        6.91509865e+02,  1.13486937e+02,  7.64160156e-01,
                                        7.60258204e+02,  1.05047293e+02,  9.56054688e-01,
                                        7.21075423e+02,  1.02034333e+02,  9.52148438e-01,
                                        7.74159125e+02,  2.07390886e+02,  9.28222656e-01,
                                        7.39210808e+02,  2.06737431e+02,  9.22363281e-01,
                                        7.95728117e+02,  2.97496647e+02,  8.87207031e-01,
                                        7.74233642e+02,  2.81802700e+02,  8.81347656e-01)
                                          .finished();

RowMatrix<double> kptsDoubleFrame9Person1 = (RowMatrix<double>(17, 3) << 1.88619148e+03, 1.16912450e+02, 1.00341797e-01,
                                        1.89108683e+03, 1.05469009e+02, 4.57763672e-02,
                                        1.89567173e+03, 1.04063452e+02, 3.81164551e-02,
                                        1.85531154e+03, 1.07447703e+02, 2.87109375e-01,
                                        1.93249757e+03, 1.12569721e+02, 3.50097656e-01,
                                        1.80413190e+03, 1.67983211e+02, 9.37988281e-01,
                                        1.87722992e+03, 1.84239997e+02, 9.16992188e-01,
                                        1.71487937e+03, 1.58206684e+02, 8.14941406e-01,
                                        1.75733413e+03, 1.55236607e+02, 6.98242188e-01,
                                        1.67953373e+03, 1.59477015e+02, 6.24511719e-01,
                                        1.72128691e+03, 9.10775895e+01, 4.88769531e-01,
                                        1.64901208e+03, 3.59047484e+02, 9.60449219e-01,
                                        1.68932930e+03, 3.63600712e+02, 9.51660156e-01,
                                        1.53275648e+03, 4.68038680e+02, 9.33105469e-01,
                                        1.56738865e+03, 4.67923025e+02, 9.12597656e-01,
                                        1.49959483e+03, 5.67262152e+02, 9.17968750e-01,
                                        1.62792146e+03, 5.39399490e+02, 9.01367188e-01)
                                          .finished();

std::vector<RowMatrix<double>> allDoubleFrameKptsPerson0 = {
    kptsDoubleFrame0Person0,
    kptsDoubleFrame1Person0,
    kptsDoubleFrame2Person0,
    kptsDoubleFrame3Person0,
    kptsDoubleFrame4Person0,
    kptsDoubleFrame5Person0,
    kptsDoubleFrame6Person0,
    kptsDoubleFrame7Person0,
    kptsDoubleFrame8Person0,
    kptsDoubleFrame9Person0};

std::vector<RowMatrix<double>> allDoubleFrameKptsPerson1 = {
    kptsDoubleFrame0Person1,
    kptsDoubleFrame1Person1,
    kptsDoubleFrame2Person1,
    // kptsDoubleFrame3Person1, // Does not exist
    kptsDoubleFrame4Person1,
    kptsDoubleFrame5Person1,
    kptsDoubleFrame6Person1,
    kptsDoubleFrame7Person1,
    kptsDoubleFrame8Person1,
    kptsDoubleFrame9Person1};

Camera<double> initDoubleCamera0()
{
    IntrinsicMatrix<double> A;
    A << 1.123478282832530113e+03, 0.000000000000000000e+00, 9.624201914371442399e+02, 0.000000000000000000e+00, 1.115995046593396864e+03, 5.875233741561746683e+02, 0.000000000000000000e+00, 0.000000000000000000e+00, 1.000000000000000000e+00;
    DistortionVector<double> d;
    d << -4.098335442199602108e-01, 2.065881602949584117e-01, -1.852675935335392279e-03, -1.274891630199873462e-04, -6.102605512197318421e-02;
    ExtrinsicMatrix<double> P = ExtrinsicMatrix<double>::Identity(4, 4);
    unsigned int height = 1280;
    unsigned int width = 1920;
    Camera<double> camera("camera_0");
    camera.setCalibration(A, d, P, height, width);
    return camera;
};

Camera<double> initDoubleCamera1()
{
    IntrinsicMatrix<double> A;
    A << 1.137844469366448493e+03, 0.000000000000000000e+00, 9.258192763436687756e+02, 0.000000000000000000e+00, 1.137868503272385851e+03, 5.874861875982957145e+02, 0.000000000000000000e+00, 0.000000000000000000e+00, 1.000000000000000000e+00;
    DistortionVector<double> d;
    d << -4.122490927804370875e-01, 1.995424107684372617e-01, -6.780183396248970658e-04, 1.457061937740045934e-03, -5.264488616219945710e-02;
    ExtrinsicMatrix<double> P = ExtrinsicMatrix<double>::Identity(4, 4);
    P << 4.894621227523461293e-01, -4.552116929303474668e-01, 7.437803069524321353e-01, -3.875108756319725103e+02, 4.786322175197727513e-01, 8.532140054413278607e-01, 2.072125992088085233e-01, -1.292527896409998505e+02, -7.289293729456041149e-01, 2.545744989944053183e-01, 6.354949202935263886e-01, 1.774314430787018466e+02, 0.000000000000000000e+00, 0.000000000000000000e+00, 0.000000000000000000e+00, 1.000000000000000000e+00;
    unsigned int height = 1280;
    unsigned int width = 1920;
    Camera<double> camera("camera_1");
    camera.setCalibration(A, d, P, height, width);
    return camera;
};

std::vector<Frame<double>> initAllDoubleFrames()
{
    std::vector<Frame<double>> frames;

    // First three frames, as frame 3 does not have a second person registered
    for (int i = 0; i <= 2; i++)
    {
        size_t cameraIndex = (allDoubleFrameCameraIds.at(i).compare("camera_0") == 0) ? 0 : 1;
        std::vector<RowMatrix<double>> frameKpts = {allDoubleFrameKptsPerson0.at(i), allDoubleFrameKptsPerson1.at(i)};
        Frame<double> frame(cameraIndex, frameKpts, allDoubleFrameTimes.at(i), allFrameOrigTimestamps.at(i));
        frames.push_back(frame);
    }

    // Fourth frame, as frame 3 does not have a second person registered
    size_t cameraIndex = (allDoubleFrameCameraIds.at(3).compare("camera_0") == 0) ? 0 : 1;
    std::vector<RowMatrix<double>> frameKpts = {allDoubleFrameKptsPerson0.at(3)};
    Frame<double> frame(cameraIndex, frameKpts, allDoubleFrameTimes.at(3), allFrameOrigTimestamps.at(3));
    frames.push_back(frame);

    // Rest of frames
    for (int i = 4; i < allDoubleFrameTimes.size(); i++)
    {
        size_t cameraIndex = (allDoubleFrameCameraIds.at(i).compare("camera_0") == 0) ? 0 : 1;
        std::vector<RowMatrix<double>> frameKpts = {allDoubleFrameKptsPerson0.at(i), allDoubleFrameKptsPerson1.at(i - 1)}; // allDoubleFrameKptsPerson1 misses 1 frame
        Frame<double> frame(cameraIndex, frameKpts, allDoubleFrameTimes.at(i), allFrameOrigTimestamps.at(i));
        frames.push_back(frame);
    }

    return frames;
};
#endif // TEST_DOUBLE_SHARED_H